<!DOCTYPE html>
<html lang="en">
<head>
  <link rel="stylesheet" href="../css/footer.css">
  <title>Rock Buddy (alpha test)</title>
</head>
<body>
  <div class="navtop">
    <a href="../sniffer/sniffer.html">Sniffer</a> |
    <a href="../search/search.html">Search</a> |
    <a href="../account/account.html">Account</a>
    <a href="../config/config.html" style="float: right;">Config</a>
  </div>
  <h1>Account Settings</h1>
  <h2>Username</h2>
  <div id="username" style="display: inline;"></div>
  <div style="display: inline; float: right;">
    <a href="./change_username.html">Change</a>
  </div>
  <hr>
  <h2>Email</h2>
  <div id="email" style="display: inline;"></div>
  <div style="display: inline; float: right;">
    <a href="./change_email.html">Change</a>
  </div>
  <hr>
  <h2>Password</h2>
  <div style="display: inline;">**********</div>
  <div style="display: inline; float: right;">
    <a href="./change_password.html">Change</a>
  </div>
  <hr>
  <a href="../auth/logout.html">Logout</a>
  <div id="modal" class="modal">
    <span class="close">&times;</span>
    <center><h3>You Found Boulder Bro Rock Buddys Big Brother!</h3></center>
    <img src="./../../images/boulderbuddy.png" alt="you found him!">
  </div>  
  <script>
    const pressed = [];
    const secretCode = 'ArrowUpArrowUpArrowDownArrowDownArrowLeftArrowRightArrowLeftArrowRightba';
    const modal = document.getElementById('modal');
    const closeBtn = document.querySelector('.close');

    window.addEventListener('keyup', (e) => {
      pressed.push(e.key);
      pressed.splice(-secretCode.length - 1, pressed.length - secretCode.length);
      if (pressed.join('').includes(secretCode)) {
        modal.style.display = 'block';
      }
    });

    closeBtn.addEventListener('click', () => {
      modal.style.display = 'none';
    });
    </script>
  <footer>
    <p>
      <div class="copyright">
        Copyright &copy; 2023, All Rights Reserved <a href="mailto:tntmusicstudios2018@gmail.com">TNTMusicStudios</a>
      </div>
      <div class="team-mem">
        <a href="./../account/team.html">team</a>
      </div>
    </p>
  </footer>  
  <script src="../common/functions.js"></script>
  <script>
    'use strict';
    sessionUpdate();

    async function main() {
      const authData = JSON.parse(sessionStorage.getItem('auth_data'));

      const accountInfo = await getAccountInfo(authData);
      if (!accountInfo) {
        api.error('Failed to get account info.');
        return;
      }

      document.getElementById('username').innerText = accountInfo['username'];
      document.getElementById('email').innerText = accountInfo['email'];
    }

    main();
  </script>
</body>