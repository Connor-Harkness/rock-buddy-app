<!DOCTYPE html>
<html lang="en">
<head>
  <title>Rock Buddy</title>
</head>
<body>
  <div>
    <a href="../sniffer/sniffer.html">Sniffer</a> |
    <a href="../search/search.html">Search</a> |
    <a href="../account/account.html">Account</a>
    <a href="../config/config.html" style="float: right;">Config</a>
  </div>
  <h1>Account Settings</h1>
  <h2>Username</h2>
  <div id="username" style="display: inline;"></div>
  <div style="display: inline; float: right;">
    <a href="./change_username.html">Change</a>
  </div>
  <hr>
  <h2>Email</h2>
  <div id="email" style="display: inline;"></div>
  <div style="display: inline; float: right;">
    <a href="./change_email.html">Change</a>
  </div>
  <hr>
  <h2>Password</h2>
  <div style="display: inline;">**********</div>
  <div style="display: inline; float: right;">
    <a href="./change_password.html">Change</a>
  </div>
  <hr>
  <a href="../auth/logout.html">Logout</a>
  <footer style="position: fixed; bottom: 0; width: 100%; text-align: center;">
    <div>Created by TNTMusicStudios - tntmusicstudios2018@gmail.com</div>
  </footer>
  <script src="../common/functions.js"></script>
  <script>
    'use strict';
    sessionUpdate();

    async function main() {
      const authData = JSON.parse(sessionStorage.getItem('auth_data'));

      const accountInfo = await getAccountInfo(authData);
      if (!accountInfo) {
        api.error('Failed to get account info.');
        return;
      }

      document.getElementById('username').innerText = accountInfo['username'];
      document.getElementById('email').innerText = accountInfo['email'];
    }

    main();
  </script>
</body>