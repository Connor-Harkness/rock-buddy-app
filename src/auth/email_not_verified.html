<!DOCTYPE html>
<html>
<head>
  <title>Rocksmith Leaderboards</title>
</head>
<body>
  <h1>Email Not Verified</h1>
  <p>Your email address has not been verified. Please check your inbox for a verification email or <a href="#" onclick="resendVerificationEmail()">click here</a> to request a new one.</p>
  <p>After you have verified your email <a href="#" onclick="redirectToHomepage()">click here</a> to be redirected to the homepage.</p>
  <a href="#" onclick="logout()">Logout</a>
  <script src="../common/functions.js"></script>
  <script>
    'use strict';

    async function resendVerificationEmail() {
      const authData = JSON.parse(sessionStorage.getItem('auth_data'));
      const emailSent = await sendVerificationEmail(authData['user_id']);
      if (emailSent) {
        api.info('Email sent.');
      }
      else {
        api.error('Failed to send email.');
      }
    }

    async function redirectToHomepage() {
      window.location.href = '../sniffer/sniffer.html';
      return;
    }
  </script>
</body>
</html>