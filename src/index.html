<!DOCTYPE html>
<html lang="en">
<head>
  <title>Rock Buddy (alpha test)</title>
</head>
<body>
  <p>Loading...</p>
  <footer>
    <p>
      <div class="copyright">
        Copyright &copy; 2023, All Rights Reserved <a href="mailto:tntmusicstudios2018@gmail.com">TNTMusicStudios</a>
      </div>
      <div class="team-mem">
        <a href="./../account/team.html">team</a>
      </div>
    </p>
  </footer>  
  <script src="common/functions.js"></script>
  <script>
    'use strict';
    sessionUpdate();
    
    async function main() {
      const auth = await checkAuthentication()
      if(!auth) {
        // Authentication failed - navigate to login
        window.location.href = './auth/login.html';
        return;
      }

      // Verify the user's email
      const authData = JSON.parse(sessionStorage.getItem('auth_data'));
      const activated = await checkAccountActivation(authData);
      if (!activated) {
        // Verification failed - redirect to account activation
        window.location.href = './account/activation.html'
        return; 
      }

      // Authentication successful - proceed
      window.location.href = './sniffer/sniffer.html';
      return;
    }

    main();
  </script>
</body>
</html>